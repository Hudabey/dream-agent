# DreamerV3 Configuration for Procgen
# =====================================

# Environment
env:
  game: coinrun  # Options: coinrun, starpilot, bigfish, fruitbot, maze, etc.
  num_envs: 16
  num_levels: 200  # Training levels (0 = unlimited)
  distribution_mode: easy  # easy, hard, extreme
  image_size: [64, 64]

# World Model
world_model:
  depth: 48           # CNN channel multiplier
  embed_dim: 1024     # Encoder output dimension
  deter_dim: 4096     # GRU hidden size
  stoch_dim: 32       # Number of categorical variables
  stoch_classes: 32   # Classes per categorical
  hidden_dim: 1024    # MLP hidden size
  reward_bins: 255    # Two-hot encoding bins
  kl_balance: 0.8     # KL loss balancing
  kl_free: 1.0        # Free nats

# Actor-Critic
agent:
  hidden_dim: 1024
  num_layers: 4
  imagination_horizon: 15
  gamma: 0.997        # Discount factor
  lambda_: 0.95       # TD(lambda)
  entropy_scale: 0.0003  # Entropy bonus

# Training
training:
  total_steps: 1000000
  batch_size: 16
  sequence_length: 50
  collect_interval: 100
  train_ratio: 64     # Train steps per env step

  # Learning rates
  world_model_lr: 0.0001
  actor_lr: 0.00003
  critic_lr: 0.00003

  # Target network
  slow_target: true
  slow_target_fraction: 0.02

  # Gradient clipping
  grad_clip: 100.0

# Logging
logging:
  log_interval: 1000
  eval_interval: 10000
  save_interval: 50000
  log_dir: runs
  checkpoint_dir: checkpoints

# Demo
demo:
  upscale_factor: 4
  value_overlay_alpha: 0.4
  dream_horizon: 10
